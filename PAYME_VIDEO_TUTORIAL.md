# üé• –í–∏–¥–µ–æ-–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è: Payme –∑–∞ 10 –º–∏–Ω—É—Ç

## –®–∞–≥ 1: –ü–æ–ª—É—á–∏—Ç—å –ò–ö–ü–£ –∫–æ–¥ (2 –º–∏–Ω)

```
‚îå‚îÄ –û—Ç–∫—Ä–æ–π—Ç–µ browser ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ https://merchant.paycom.uz     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
        ‚Üì
‚îå‚îÄ –ù–∞–∂–º–∏—Ç–µ "Register" –∏–ª–∏ "Login"‚îê
‚îÇ (–µ—Å–ª–∏ —É –≤–∞—Å —É–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç)   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
        ‚Üì
‚îå‚îÄ –°–æ–∑–¥–∞–π—Ç–µ/–≤—ã–±–µ—Ä–∏—Ç–µ —Å–µ—Ä–≤–∏—Å ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –í—ã —É–≤–∏–¥–∏—Ç–µ –ò–ö–ü–£ –∫–æ–¥ - —ç—Ç–æ 16    ‚îÇ
‚îÇ —Å–∏–º–≤–æ–ª–æ–≤ —Ç–∏–ø–∞: 507144111111111  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
        ‚Üì
‚îå‚îÄ –°–∫–æ–ø–∏—Ä—É–π—Ç–µ Merchant ID ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –≠—Ç–æ –≤–∞—à –ò–ö–ü–£ –∫–æ–¥!              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## –®–∞–≥ 2: –û–±–Ω–æ–≤–∏—Ç—å .env (1 –º–∏–Ω)

–û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

```env
# –î–æ–±–∞–≤—å—Ç–µ —ç—Ç–∏ —Å—Ç—Ä–æ–∫–∏:
PAYME_MERCHANT_ID=507144111111111
PAYME_KEY=0300BF8B4D537FD49D1F1E13B5215E58
PAYME_TEST_MODE=false
BACKEND_URL=https://your-domain.com
```

–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ñ–∞–π–ª.

## –®–∞–≥ 3: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Callback URL (2 –º–∏–Ω)

```
‚îå‚îÄ –í–µ—Ä–Ω–∏—Ç–µ—Å—å –≤ Payme cabinet ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ https://merchant.paycom.uz     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
        ‚Üì
‚îå‚îÄ –ù–∞–π–¥–∏—Ç–µ –≤–∞—à —Å–µ—Ä–≤–∏—Å ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∏–∫–æ–Ω–∫—É —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
        ‚Üì
‚îå‚îÄ –ù–∞–π–¥–∏—Ç–µ "API Receiver URL" ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –∏–ª–∏ "Callback URL"              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
        ‚Üì
‚îå‚îÄ –í–≤–µ–¥–∏—Ç–µ URL –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ https://your-domain.com/api/    ‚îÇ
‚îÇ   payments/payme/callback       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
        ‚Üì
‚îå‚îÄ –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –ù–∞–∂–º–∏—Ç–µ "Save" –∏–ª–∏ "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å"  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## –®–∞–≥ 4: –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å (3 –º–∏–Ω)

–û—Ç–∫—Ä–æ–π—Ç–µ —Ç–µ—Ä–º–∏–Ω–∞–ª:

```bash
# –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞
cd d:\projects\medical_care

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ backend
npm run dev

# –í –¥—Ä—É–≥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç—ã
node test-payme.js
```

–í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:
```
‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã –∑–∞–≤–µ—Ä—à–µ–Ω—ã!
```

## –®–∞–≥ 5: –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ Frontend (2 –º–∏–Ω)

–í –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ –æ–ø–ª–∞—Ç—ã –¥–æ–±–∞–≤—å—Ç–µ:

```typescript
const handlePayment = async () => {
  const response = await fetch('/api/payments/create', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
      'Authorization': `Bearer ${token}`,
    },
    body: JSON.stringify({
      items: cartItems,
      amount: totalAmount,
      provider: 'payme'  // <- –≤—ã–±–∏—Ä–∞–µ–º Payme
    }),
  });

  const data = await response.json();
  window.location.href = data.paymentInitData.redirectUrl;
};
```

–ì–æ—Ç–æ–≤–æ! ‚úÖ

---

## üß† –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç (–ø–æ–Ω–∏–º–∞–Ω–∏–µ)

```
1. User –Ω–∞–∂–∏–º–∞–µ—Ç "–û–ø–ª–∞—Ç–∏—Ç—å Payme"
   ‚îî‚îÄ> Frontend –≤—ã–∑—ã–≤–∞–µ—Ç /api/payments/create

2. Backend –ø–æ–ª—É—á–∞–µ—Ç –∑–∞–ø—Ä–æ—Å
   ‚îú‚îÄ> –°–æ–∑–¥–∞–µ—Ç –∑–∞–∫–∞–∑ –≤ –ë–î (pending)
   ‚îî‚îÄ> –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Å—ã–ª–∫—É –Ω–∞ Payme

3. Frontend –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞ Payme
   ‚îî‚îÄ> window.location.href = redirectUrl

4. User –≤–∏–¥–∏—Ç —Ñ–æ—Ä–º—É Payme
   ‚îú‚îÄ> –í–≤–æ–¥–∏—Ç –¥–∞–Ω–Ω—ã–µ –∫–∞—Ä—Ç—ã
   ‚îî‚îÄ> –ù–∞–∂–∏–º–∞–µ—Ç "–û–ø–ª–∞—Ç–∏—Ç—å"

5. Payme –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç callback –Ω–∞ backend
   ‚îú‚îÄ> Backend –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∑–∞–∫–∞–∑
   ‚îú‚îÄ> Backend –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ç–∞—Ç—É—Å (paid)
   ‚îú‚îÄ> Backend –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
   ‚îî‚îÄ> Backend –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –æ—Ç–≤–µ—Ç Payme

6. User –≤–∏–¥–∏—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
   ‚îî‚îÄ> –ó–∞–∫–∞–∑ –≥–æ—Ç–æ–≤!
```

**–ì–ª–∞–≤–Ω–æ–µ:** Backend –¥–µ–ª–∞–µ—Ç 90% —Ä–∞–±–æ—Ç—ã! –í–∞–º –Ω—É–∂–Ω–æ —Ç–æ–ª—å–∫–æ 2 —Å—Ç—Ä–æ–∫–∏ –∫–æ–¥–∞ –Ω–∞ frontend.

---

## üîÑ –ü–æ—Ç–æ–∫ –¥–µ–Ω–µ–≥

```
User –ø–ª–∞—Ç–∏—Ç
  ‚Üì
–ö–∞—Ä—Ç–∞ ‚Üí Payme (–æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–ª–∞—Ç–µ–∂–∞)
  ‚Üì
Payme ‚Üí Backend (callback –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ)
  ‚Üì
Backend ‚Üí –ë–î (–æ–±–Ω–æ–≤–∏—Ç—å –∑–∞–∫–∞–∑)
  ‚Üì
Backend ‚Üí Telegram (—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω—É)
  ‚Üì
–î–µ–Ω—å–≥–∏ –Ω–∞ —Å—á–µ—Ç Payme
  ‚Üì
Payme ‚Üí –í–∞—à —Å—á–µ—Ç (–µ–∂–µ–¥–Ω–µ–≤–Ω–æ/–µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ)
```

---

## ‚ö†Ô∏è –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏

### ‚ùå –û—à–∏–±–∫–∞: "Order not found"
```
–ü—Ä–∏—á–∏–Ω–∞: –ó–∞–∫–∞–∑ –Ω–µ —Å–æ–∑–¥–∞–Ω –≤ –ë–î
–†–µ—à–µ–Ω–∏–µ: –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –∫–∞—Ä—Ç–∏–Ω–∫–∞ —Ç–æ–≤–∞—Ä–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
```

### ‚ùå –û—à–∏–±–∫–∞: "Authorization failed"  
```
–ü—Ä–∏—á–∏–Ω–∞: API Key –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
–†–µ—à–µ–Ω–∏–µ: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ PAYME_KEY –≤ .env
```

### ‚ùå –û—à–∏–±–∫–∞: "Callback –Ω–µ –ø—Ä–∏—Ö–æ–¥–∏—Ç"
```
–ü—Ä–∏—á–∏–Ω–∞: URL –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤ Payme cabinet
–†–µ—à–µ–Ω–∏–µ: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π callback URL
         https://domain.com/api/payments/payme/callback
```

---

## üìä –°—Ç–∞—Ç—É—Å—ã –∑–∞–∫–∞–∑–∞

```
pending  ‚è≥ –û–∂–∏–¥–∞–Ω–∏–µ –æ–ø–ª–∞—Ç—ã
  ‚Üì
paid     ‚úÖ –ó–∞–∫–∞–∑ –æ–ø–ª–∞—á–µ–Ω (–ø–æ—Å–ª–µ Payme callback)
  ‚Üì
failed   ‚ùå –û—à–∏–±–∫–∞ –ø–ª–∞—Ç–µ–∂–∞
  ‚Üì
cancelled ‚ùå –û—Ç–º–µ–Ω–µ–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
```

---

## üéØ Checklist

- [ ] –ò–ö–ü–£ –∫–æ–¥ –ø–æ–ª—É—á–µ–Ω
- [ ] .env –æ–±–Ω–æ–≤–ª–µ–Ω —Å –ò–ö–ü–£ –∫–æ–¥–æ–º
- [ ] Backend –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–µ–Ω
- [ ] Callback URL —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ Payme cabinet
- [ ] test-payme.js –∑–∞–ø—É—â–µ–Ω —É—Å–ø–µ—à–Ω–æ
- [ ] Frontend –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω
- [ ] –¢–µ—Å—Ç–æ–≤–∞—è –æ–ø–ª–∞—Ç–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞
- [ ] –ó–∞–∫–∞–∑ –æ–±–Ω–æ–≤–∏–ª—Å—è –≤ –ë–î
- [ ] Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø—Ä–∏—à–ª–æ
- [ ] PAYME_TEST_MODE = false (–¥–ª—è production)

---

## üöÄ Production (3 –¥–æ–ø. —à–∞–≥–∞)

–ö–æ–≥–¥–∞ –≥–æ—Ç–æ–≤–∏—Ç–µ—Å—å –∫ production:

1. **–ò–∑–º–µ–Ω–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º:**
```env
PAYME_TEST_MODE=false
```

2. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ–∞–ª—å–Ω—ã–π –ò–ö–ü–£ –∫–æ–¥:**
```env
PAYME_MERCHANT_ID=–≤–∞—à_—Ä–µ–∞–ª—å–Ω—ã–π_–∫–æ–¥
```

3. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ–∞–ª—å–Ω—ã–π API Key:**
```env
PAYME_KEY=–≤–∞—à_—Ä–µ–∞–ª—å–Ω—ã–π_api_key
```

–ë–æ–ª—å—à–µ –Ω–∏—á–µ–≥–æ –Ω–µ –Ω—É–∂–Ω–æ! –û—Å—Ç–∞–ª—å–Ω–æ–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

---

## üìû –ü–æ–º–æ—â—å

- üìñ –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: [PAYME_INTEGRATION.md](./PAYME_INTEGRATION.md)
- üí¨ –ß–µ–∫-–ª–∏—Å—Ç: [PAYME_CHECKLIST.md](./PAYME_CHECKLIST.md)
- üîß Troubleshooting: [PAYME_INTEGRATION.md#troubleshooting](./PAYME_INTEGRATION.md)
- üìß –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Payme: merchant@paycom.uz

---

## üéâ –ì–æ—Ç–æ–≤–æ!

–í—ã –∑–∞ 10 –º–∏–Ω—É—Ç –Ω–∞—Å—Ç—Ä–æ–∏–ª–∏ –ø–æ–ª–Ω—É—é –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é Payme! 

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –ü—Ä–æ—á–∏—Ç–∞–π—Ç–µ [PAYME_QUICK_START.md](./PAYME_QUICK_START.md) –¥–ª—è –±–æ–ª–µ–µ –≥–ª—É–±–æ–∫–æ–≥–æ –ø–æ–Ω–∏–º–∞–Ω–∏—è.

–£–¥–∞—á–∏! üöÄ
