# ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ Payme

## –ß—Ç–æ —Ç–∞–∫–æ–µ –ò–ö–ü–£?

**–ò–ö–ü–£ –∫–æ–¥** = **Merchant ID** = 16-–∑–Ω–∞—á–Ω—ã–π —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –≤–∞—à–µ–≥–æ —Å—á–µ—Ç–∞ –≤ —Å–∏—Å—Ç–µ–º–µ Payme

–ü—Ä–∏–º–µ—Ä: `507144111111111`

---

## üìã –ß–µ–∫-–ª–∏—Å—Ç –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

### –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- [ ] –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –Ω–∞ https://merchant.paycom.uz
- [ ] –ü–æ–ª—É—á–µ–Ω **–ò–ö–ü–£ –∫–æ–¥ (Merchant ID)** - 16 —Ü–∏—Ñ—Ä
- [ ] –ü–æ–ª—É—á–µ–Ω **API Key** –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- [ ] –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞ —Ç–µ—Å—Ç–æ–≤—ã–π API Key: `0300BF8B4D537FD49D1F1E13B5215E58`

### Backend –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω [.env](../.env) —Ñ–∞–π–ª —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏:
  ```env
  PAYME_MERCHANT_ID=–≤–∞—à_16_–∑–Ω–∞—á–Ω—ã–π_–∫–æ–¥
  PAYME_KEY=–≤–∞—à_api_–∫–ª—é—á
  PAYME_TEST_MODE=false
  ```
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω —Ñ–∞–π–ª [backend/controllers/paymentController.js](../backend/controllers/paymentController.js)
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω—ã routes –≤ [backend/routes/payment.js](../backend/routes/payment.js)
- [ ] Backend –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–µ–Ω –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

### Payme –∫–∞–±–∏–Ω–µ—Ç
- [ ] –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ —Å—Å—ã–ª–∫–∞ API Receiver –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ:
  ```
  https://your-domain.com/api/payments/payme/callback
  ```
- [ ] –°–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω curl –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω Node.js —Å–∫—Ä–∏–ø—Ç
- [ ] –ó–∞–ø—É—â–µ–Ω—ã —Ç–µ—Å—Ç—ã —á–µ—Ä–µ–∑ [test-payme.js](../test-payme.js):
  ```bash
  node test-payme.js
  ```
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞ - –Ω–µ—Ç –æ—à–∏–±–æ–∫ Authorization
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ –ë–î - –∑–∞–∫–∞–∑ –æ–±–Ω–æ–≤–∏–ª—Å—è –Ω–∞ `paid`

### Frontend –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- [ ] –ù–∞ –∫–Ω–æ–ø–∫–µ –æ–ø–ª–∞—Ç—ã –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä `payme`
- [ ] –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∑–∞–ø—Ä–æ—Å —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏:
  ```javascript
  {
    items: [...],
    amount: 50000,  // –≤ –£–ó–°
    provider: 'payme'
  }
  ```
- [ ] –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –Ω–∞ Payme gateway
- [ ] –ü–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –Ω–∞ —Å–∞–π—Ç

### Production
- [ ] –ò–∑–º–µ–Ω–µ–Ω `PAYME_TEST_MODE=false`
- [ ] –í—Å—Ç–∞–≤–ª–µ–Ω **–Ω–∞—Å—Ç–æ—è—â–∏–π –ò–ö–ü–£ –∫–æ–¥** (Merchant ID)
- [ ] –í—Å—Ç–∞–≤–ª–µ–Ω **production API Key**
- [ ] –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ **production —Å—Å—ã–ª–∫–∞ callback**
- [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω **HTTPS —Ç–æ–ª—å–∫–æ**
- [ ] SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω

---

## üìÅ –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∞–π–ª—ã

| –§–∞–π–ª | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|---------|
| [PAYME_INTEGRATION.md](./PAYME_INTEGRATION.md) | üìñ –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è |
| [PAYME_QUICK_START.md](./PAYME_QUICK_START.md) | üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç |
| [backend/controllers/paymentController.js](../backend/controllers/paymentController.js) | üíª –õ–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–ª–∞—Ç–µ–∂–µ–π |
| [backend/routes/payment.js](../backend/routes/payment.js) | üõ£Ô∏è API endpoints |
| [.env.example](.env.example) | ‚öôÔ∏è –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è |
| [test-payme.js](../test-payme.js) | üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ |

---

## üîÑ –ü—Ä–æ—Ü–µ—Å—Å –ø–ª–∞—Ç–µ–∂–∞

```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞ —Å–∞–π—Ç–µ –≤—ã–±–∏—Ä–∞–µ—Ç Payme
   ‚Üì
2. Frontend –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–∫–∞–∑ –Ω–∞ backend
   ‚Üì
3. Backend —Å–æ–∑–¥–∞–µ—Ç –∑–∞–∫–∞–∑ –≤ –ë–î (status: pending)
   ‚Üì
4. Backend –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Å—ã–ª–∫—É –Ω–∞ Payme gateway
   ‚Üì
5. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç —Ñ–æ—Ä–º—É Payme
   ‚Üì
6. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç –¥–∞–Ω–Ω—ã–µ –∫–∞—Ä—Ç—ã
   ‚Üì
7. Payme –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç CheckPerformTransaction callback
   ‚Üì
8. Backend –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∑–∞–∫–∞–∑ –∏ —Å—É–º–º—É
   ‚Üì
9. Payme –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç PerformTransaction callback
   ‚Üì
10. Backend –æ–±–Ω–æ–≤–ª—è–µ—Ç –∑–∞–∫–∞–∑ (status: paid)
   ‚Üì
11. Backend –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ Telegram
   ‚Üì
12. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
```

---

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

| –ü—Ä–æ–±–ª–µ–º–∞ | –†–µ—à–µ–Ω–∏–µ |
|----------|---------|
| `Authorization failed` | –ü—Ä–æ–≤–µ—Ä—å—Ç–µ API Key –≤ .env |
| `Order not found` | –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –∑–∞–∫–∞–∑ —Å–æ–∑–¥–∞–Ω –≤ –ë–î |
| `Amount mismatch` | Payme –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–∏–π–∏–Ω—ã (x100). Backend –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ |
| `Callback –Ω–µ –ø—Ä–∏—Ö–æ–¥–∏—Ç` | –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π URL –≤ –∫–∞–±–∏–Ω–µ—Ç–µ Payme |
| `HTTPS only` | –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTPS —Å –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–º —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–º |

---

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã –ø–æ–¥–¥–µ—Ä–∂–∫–∏

**Payme/Paycom:**
- üìß Email: merchant@paycom.uz
- üì± –¢–µ–ª–µ—Ñ–æ–Ω: +998 71 200-0-200
- üåê –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: https://paycom.uz/ru/developers/
- üè¢ –ö–∞–±–∏–Ω–µ—Ç: https://merchant.paycom.uz

---

## üéì –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ

```
Merchant ID (—Ç–µ—Å—Ç): 507144
API Key (—Ç–µ—Å—Ç): 0300BF8B4D537FD49D1F1E13B5215E58

–ö–∞—Ä—Ç—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:
- Visa: 4111 1111 1111 1111 (12/25 CVV: 000)
- MasterCard: 5105 1051 0510 5100 (12/25 CVV: 000)
```

---

## ‚ú® –ì–æ—Ç–æ–≤–æ!

–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! üéâ –í–∞—à–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Payme —Å –ò–ö–ü–£ –∫–æ–¥–æ–º –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞.

**–í–æ–ø—Ä–æ—Å—ã?** 
- –ü—Ä–æ—á–∏—Ç–∞–π—Ç–µ [PAYME_INTEGRATION.md](./PAYME_INTEGRATION.md)
- –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç—ã: `node test-payme.js`
- –°–≤—è–∂–∏—Ç–µ—Å—å —Å Payme support
