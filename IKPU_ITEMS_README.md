# โ IKPU ะฝะฐ ััะพะฒะฝะต ัะพะฒะฐัะพะฒ - ะะะะะะะะะะะ

## ๐ ะะตะทัะผะต

ะกะธััะตะผะฐ ะพะฑะฝะพะฒะปะตะฝะฐ ะดะปั ะฟะพะดะดะตัะถะบะธ **IKPU ะบะพะดะพะฒ ะฝะฐ ััะพะฒะฝะต ะบะฐะถะดะพะณะพ ัะพะฒะฐัะฐ**.

ะะฐะถะดัะน ัะพะฒะฐั ัะตะฟะตัั ะผะพะถะตั ะธะผะตัั ัะฒะพะน Payme Merchant ID (IKPU ะบะพะด).

## ๐ ะงัะพ ะธะทะผะตะฝะธะปะพัั

| ะะพะผะฟะพะฝะตะฝั | ะงัะพ ะดะพะฑะฐะฒะปะตะฝะพ |
|-----------|--------------|
| CatalogData.ts | ะะพะปะต `ikpuCode?: string` |
| paymentController.js | ะะฐะปะธะดะฐัะธั ะธ ะธัะฟะพะปัะทะพะฒะฐะฝะธะต IKPU ัะพะฒะฐัะพะฒ |
| Order.js (MongoDB) | ะะพะปะต `itemIkpuCodes` ะดะปั ัะพััะฐะฝะตะฝะธั |
| PaymentIntegrationExample.tsx | ะัะธะผะตัั ั IKPU |

## ๐ฏ ะะฐะบ ัะฐะฑะพัะฐะตั

### 1. ะขะพะฒะฐั ั IKPU ะบะพะดะพะผ

```typescript
{
  id: 1,
  name: "Syring",
  price: 25000,
  ikpuCode: "507144111111111"  // โ IKPU ััะพะณะพ ัะพะฒะฐัะฐ
}
```

### 2. ะะฐะบะฐะท ั ัะพะฒะฐัะฐะผะธ

```
Cart:
โโ Syring (ikpuCode: "507144111111111")
โโ Mask (ikpuCode: "507144111111111")   โ ะะะะะะะะะซะ
โโ Glove (ikpuCode: "507144111111111")  โ ะะะะะะะะะซะ
```

### 3. ะะปะฐัะตะถะฝัะน URL

```
https://checkout.paycom.uz/507144111111111?orderId=...
                        ^^^^^^^^^^^^^^^^
                        IKPU ะธะท ัะพะฒะฐัะพะฒ
```

## ๐ ะัััััะน ััะฐัั

### ะจะฐะณ 1: ะะพะฑะฐะฒััะต IKPU ะฒ ะบะฐัะฐะปะพะณ

**ะคะฐะนะป:** `src/data/CatalogData.ts`

```typescript
export const items = [
  {
    id: 1,
    category: "injection",
    nameKey: "syring",
    price: 25000,
    ikpuCode: "507144111111111",  // โ ะะะะะะฌะขะ
    imageBase: "syring_100ml",
  },
  // ... ะพััะฐะปัะฝัะต ัะพะฒะฐัั ั IKPU
];
```

### ะจะฐะณ 2: ะขะตััะธััะนัะต

```bash
# ะกะพะทะดะฐะนัะต ะทะฐะบะฐะท ัะตัะตะท frontend
# Backend ะฐะฒัะพะผะฐัะธัะตัะบะธ:
# โ ะัะพะฒะตัะธั IKPU
# โ ะัะฟะพะปัะทัะตั IKPU ะฒ URL
# โ ะกะพััะฐะฝะธั IKPU ะฒ ะทะฐะบะฐะทะต
```

## โจ ะัะธะผะตัั

### โ ะัะฐะฒะธะปัะฝะพ: ะะดะธะฝะฐะบะพะฒัะน IKPU

```
ะขะพะฒะฐั A: ikpuCode: "507144111111111"
ะขะพะฒะฐั B: ikpuCode: "507144111111111"  โ ะะะะะะะะะซะ
โ ะะตะทัะปััะฐั: ะะปะฐัะตะถ ััะฟะตัะตะฝ โ
```

### โ ะะตะฟัะฐะฒะธะปัะฝะพ: ะะฐะทะฝัะต IKPU

```
ะขะพะฒะฐั A: ikpuCode: "507144111111111"
ะขะพะฒะฐั B: ikpuCode: "507144222222222"  โ ะะะะะซะ
โ ะะตะทัะปััะฐั: ะัะธะฑะบะฐ - ัะฐะทะฝัะต vendorั โ
```

## ๐ ะะพะบัะผะตะฝัะฐัะธั

**ะัะพัะธัะฐะนัะต ะฒ ััะพะผ ะฟะพััะดะบะต:**

1. **[HOW_TO_ADD_IKPU_CODES.md](./HOW_TO_ADD_IKPU_CODES.md)** โ ะะะงะะะขะ ะะขะกะฎะะ
   - ะะฐะบ ะดะพะฑะฐะฒะธัั IKPU ะฒ ะบะฐัะฐะปะพะณ
   - ะะพัะฐะณะพะฒะฐั ะธะฝััััะบัะธั
   - ะัะธะผะตัั

2. **[ITEM_IKPU_CODES.md](./ITEM_IKPU_CODES.md)**
   - ะะพะปะฝะฐั ะธะฝัะพัะผะฐัะธั
   - Workflow ะฟะปะฐัะตะถะฐ
   - Backend ะพะฑัะฐะฑะพัะบะฐ

3. **[IKPU_UPDATE.md](./IKPU_UPDATE.md)**
   - ะงัะพ ะธะทะผะตะฝะธะปะพัั
   - ะขะตัะฝะธัะตัะบะธะต ะดะตัะฐะปะธ

## ๐งช ะัะพะฒะตัะบะฐ

### ะขะตัั 1: IKPU ะฒ ัะพะฒะฐัะต

```bash
# DevTools Console
const item = catalogItems[0];
console.log(item.ikpuCode);  // "507144111111111"
```

### ะขะตัั 2: IKPU ะฒ ะฟะปะฐัะตะถะฝะพะผ ะทะฐะฟัะพัะต

```bash
# DevTools Network
# POST /api/payments/create

// Request:
{
  items: [{id: 1, ikpuCode: "507144111111111"}],
  provider: "payme"
}

// Response:
{
  redirectUrl: "https://checkout.paycom.uz/507144111111111?..."
}
```

### ะขะตัั 3: IKPU ะฒ ะทะฐะบะฐะทะต

```bash
# MongoDB
db.orders.findOne()

{
  itemIkpuCodes: ["507144111111111"]
}
```

## โ ะะพะฟัะพัั ะธ ะพัะฒะตัั

**Q: ะัะถะฝะพ ะปะธ ะดะพะฑะฐะฒะปััั IKPU ะบะพ ะฒัะตะผ ัะพะฒะฐัะฐะผ?**
A: ะะฐ, ะตัะปะธ ะธัะฟะพะปัะทัะตัะต Payme.

**Q: ะัะต ัะพะฒะฐัั ะดะพะปะถะฝั ะธะผะตัั ะพะดะธะฝะฐะบะพะฒัะน IKPU?**
A: ะะฐ, ะฒ ัะตะบััะตะน ะฒะตััะธะธ - ะฒัะต ัะพะฒะฐัั ะฒ ะทะฐะบะฐะทะต ะพั ะพะดะฝะพะณะพ vendora.

**Q: ะงัะพ ะตัะปะธ ะทะฐะฑัะดั ะดะพะฑะฐะฒะธัั IKPU?**
A: Backend ะฒะตัะฝะตั ะพัะธะฑะบั ั ัะพะพะฑัะตะฝะธะตะผ "Item missing IKPU code".

**Q: ะะฐะบ ัะทะฝะฐัั IKPU?**
A: ะะฐ https://merchant.paycom.uz ะฟะพัะปะต ัะตะณะธัััะฐัะธะธ.

## ๐ง ะขะตัะฝะธัะตัะบะธะต ะดะตัะฐะปะธ

### ะขะธะฟั ะดะฐะฝะฝัั

```typescript
// Frontend
interface CartItem {
  id: number;
  name: string;
  price: number;
  quantity: number;
  ikpuCode?: string;  // โ 16-digit Payme ID
}

// Backend
itemIkpuCodes: [{ type: String }]  // Array of IKPU codes
```

### Backend ะปะพะณะธะบะฐ

```javascript
// ะะฐะปะธะดะฐัะธั
if (provider === "payme") {
  // 1. ะัะพะฒะตััะตะผ ััะพ ะบะฐะถะดัะน ัะพะฒะฐั ะธะผะตะตั IKPU
  for (const item of items) {
    if (!item.ikpuCode) {
      return error("Item missing IKPU code");
    }
  }
  
  // 2. ะัะพะฒะตััะตะผ ััะพ ะฒัะต IKPU ะพะดะธะฝะฐะบะพะฒัะต
  const ikpuCodes = [...new Set(items.map(i => i.ikpuCode))];
  if (ikpuCodes.length > 1) {
    return error("Items from different merchants");
  }
  
  // 3. ะัะฟะพะปัะทัะตะผ IKPU ะฒ ะฟะปะฐัะตะถะฝะพะน ัััะปะบะต
  const itemIkpuCode = items[0].ikpuCode;
}
```

## ๐ ะะฐััะพะฝัััะต ัะฐะนะปั

| ะคะฐะนะป | ะขะธะฟ | ะกัะฐััั |
|------|-----|--------|
| src/data/CatalogData.ts | โ๏ธ ะะฑะฝะพะฒะปะตะฝะพ | โ |
| backend/controllers/paymentController.js | โ๏ธ ะะฑะฝะพะฒะปะตะฝะพ | โ |
| backend/models/Order.js | โ๏ธ ะะฑะฝะพะฒะปะตะฝะพ | โ |
| src/examples/PaymentIntegrationExample.tsx | โ๏ธ ะะฑะฝะพะฒะปะตะฝะพ | โ |
| HOW_TO_ADD_IKPU_CODES.md | ๐ ะกะพะทะดะฐะฝะพ | โ |
| ITEM_IKPU_CODES.md | ๐ ะกะพะทะดะฐะฝะพ | โ |
| IKPU_UPDATE.md | ๐ ะกะพะทะดะฐะฝะพ | โ |
| IKPU_ITEMS_COMPLETE.md | ๐ ะกะพะทะดะฐะฝะพ | โ |

## โ ะะพัะพะฒะพ!

ะกะธััะตะผะฐ ะฟะพะปะฝะพัััั ะฟะพะดะดะตัะถะธะฒะฐะตั IKPU ะบะพะดั ะฝะฐ ััะพะฒะฝะต ัะพะฒะฐัะพะฒ! ๐

**ะกะปะตะดัััะธะน ัะฐะณ:**
1. ะัะบัะพะนัะต [HOW_TO_ADD_IKPU_CODES.md](./HOW_TO_ADD_IKPU_CODES.md)
2. ะะพะฑะฐะฒััะต IKPU ะบะพะดั ะฒ ะบะฐัะฐะปะพะณ
3. ะขะตััะธััะนัะต ะฟะปะฐัะตะถะธ

---

**ะกัะฐััั:** โ ะะพัะพะฒะพ ะบ ะธัะฟะพะปัะทะพะฒะฐะฝะธั
**ะะฐัะฐ:** 30 ัะฝะฒะฐัั 2026
